{% extends "layout.html" %}
{% block content %}
<style>
    /* Styling for PDF rendering */
    @page {
        size: A4;
        margin: 20mm;
    }
    .navbar,
    .footer,
    .top-bar,
    .btn {
        display: none;
    }

    .container {
        width: 100%;
        margin: auto;
        padding: 10mm;
        font-family: 'Times New Roman', Times, serif;
        font-size: 12pt;
        color: #2e7d32;
    }

    .school-header {
        margin-bottom: 20px;
        display: flex;
        align-items: center;
    }

    .school-logo {
        width: 100px;
        margin-right: 20px;
    }

    .card-title, .card-subtitle {
        color: #2e7d32;
        margin-bottom: 5px; /* Added margin bottom */
    }

    .table {
        width: 100%;
        margin-bottom: 10px; /* Reduced margin bottom */
        border-collapse: collapse;
    }

    .table th, .table td {
        border: 1px solid #2e7d32;
        padding: 8px;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #e8f5e9;
    }

    .remarks .table {
        margin-top: 10px; /* Reduced margin top */
    }

    .text-center {
        text-align: center;
    }

    .text-end {
        text-align: right;
    }

    .card {
        border: none;
    }
    .card-header {
        border-bottom: none;
    }
</style>

<div class="container mt-5">
    <div class="card border-0 shadow-lg">
        <div class="school-header text-center">
            <img src="{{ static_url }}" alt="School Logo" class="school-logo">
            <div>
                <h1 class="card-title text-uppercase">{{ school_name }}</h1>
                <p class="card-text">6 OOMNNE DRIVE, ABAYI, ABA, ABIA STATE</p>
                <h2 class="card-subtitle text-uppercase">REPORT SHEET FOR {{ term }} {{ session }} SESSION</h2>
            </div>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <tr>
                    <td>Name</td>
                    <td>{{ student.first_name }} {{ student.last_name }}</td>
                    <td>Class</td>
                    <td>{{ student.entry_class }}</td>
                </tr>
                <tr>
                    <td>Student ID</td>
                    <td>AAIS/0559/00{{ student.id }}</td>
                    <td>Next Term Begins</td>
                    <td>9th Jan, 2024</td>
                </tr>
                <tr>
                    <td>Gender</td>
                    <td>{{ student.gender.capitalize() }}</td>
                    <td>Average for the Term:</td>
                    <td>{{ average_total }}</td>
                </tr>
                <tr>
                    <td>Total Obtained</td>
                    <td>{{ total_obtained }}</td>
                    <td>Total Obtainable</td>
                    <td>{{ total_obtainable }}</td>
                </tr>
            </table>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Class Assessment</th>
                        <th>Summative Test</th>
                        <th>Exam</th>
                        <th>Total</th>
                        <th>Grade</th>
                        <th>Remark</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in results %}
                    <tr>
                        <td>{{ result.subject.name }}</td>
                        <td>{{ result.class_assessment }}</td>
                        <td>{{ result.summative_test }}</td>
                        <td>{{ result.exam }}</td>
                        <td>{{ result.total }}</td>
                        <td>{{ result.grade }}</td>
                        <td>{{ result.remark }}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td class="text-end"><strong>Grand Total:</strong></td>
                        <td><strong>{{ grand_total.class_assessment }}</strong></td>
                        <td><strong>{{ grand_total.summative_test }}</strong></td>
                        <td><strong>{{ grand_total.exam }}</strong></td>
                        <td><strong>{{ grand_total.total }}</strong></td>
                        <td colspan="2"></td>
                    </tr>
                </tbody>
            </table>
            <p class="card-text text-center">Grades: A+ [95-100], A [80-94], B+ [70-79], B [65-69], C+ [60-64], C [50-59], D [40-49], E [30-39], F [0-29]</p>
            <div class="remarks mt-4">
                <table class="table">
                    <tbody>
                        <tr>
                            <td><strong>School Principal Comment:</strong></td>
                            <td>VERY IMPRESSIVE WORK, WONDERFULLY DONE! YOU HAVE MADE A DIFFERENCE, YOU ARE NOW A REFERENCE POINT.</td>
                        </tr>
                        <tr>
                            <td><strong>Class Teacher Comment:</strong></td>
                            <td>EXCELLENT RESULT, KEEP IT UP</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}