<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Admin Dashboard for managing school data including students, teachers, parents, and classes." />
    <meta name="keywords" content="Admin Dashboard, School Management, Students, Teachers, Classes" />
    <meta name="author" content="Aunty Anne's Int'l School" />
    <title>{% block title %}Admin Dashboard{% endblock %}</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    
    <!-- Boxicons CDN Link -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
    <!--<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" onload="this.rel='stylesheet'" />-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
<nav id="sidebar" class="d-flex flex-column min-vh-100 sidebar">
  <div class="d-flex align-items-center mb-4 logo-details">
    <i class="bx bxl-c-plus-plus text-white fs-3"></i>
    <span class="logo_name">Admin Dashboard</span>
  </div>

  <ul id="nav-links" class="flex-column list-unstyled nav-links">
    <li class="nav-item">
      <a href="{{ url_for('admins.admin_dashboard') }}" class="nav-link text-white active">
        <i class="bx bx-grid-alt"></i>
        <span>Dashboard</span>
      </a>
    </li>
    <li class="nav-item">
      <a href="{{ url_for('main.index') }}" class="nav-link text-white">
      <i class="bx bx-home"></i>
        <span>Home</span>
      </a>
    </li>
    
    <!-- Student Management -->
    <li class="nav-item">
        <a href="#studentManagement" class="text-white nav-link" data-bs-toggle="collapse" data-bs-target="#studentManagement" aria-expanded="false">
            <i class='bx bxs-graduation'></i> <span>Student Management</span>
        </a>
        <div class="collapse" id="studentManagement">
            <ul class="nav flex-column ms-0">
                <li><a href="#" class="text-white nav-link"><span>Add New Student</span></a></li>
                <li><a href="{{ url_for('admins.approve_students') }}" class="text-white nav-link"><span>View All Students</span></a></li>
                <li><a href="#" class="text-white nav-link"><span>Edit Student Details</span></a></li>
                <li><a href="#" class="text-white nav-link"><span>Delete Student Records</span></a></li>
                <li><a href="#" class="text-white nav-link"><span>Bulk Upload Students</span></a></li>
                <li><a href="#" class="text-white nav-link"><span>Search and Filter Students</span></a></li>
            </ul>
        </div>
    </li>
    
    <!-- Class Management -->
    <li class="nav-item">
      <a href="#classManagement" class="nav-link text-white" data-bs-toggle="collapse" data-bs-target="#classManagement"  aria-expanded="false">
          <i class='bx bxs-group'></i> 
          <span>Class Management</span>
      </a>
      <div class="collapse" id="classManagement">
          <ul class="nav flex-column ms-0">
                <li><a href="#" class="nav-link text-white"><span>Add Class</span></a></li>
                <li><a href="{{ url_for('admins.select_class') }}" class="nav-link text-white"><span>View Classes</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Edit Class/Section Details</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Assign Teachers to Classes</span></a></li>
            </ul>
      </div>
    </li>
    
    <!-- Subject Management -->
    <li class="nav-item">
      <a href="#subjectManagement" class="nav-link text-white" data-bs-toggle="collapse" data-bs-target="#subjectManagement"  aria-expanded="false">
          <i class="fas fa-book icon"></i> 
          <span>Subject Management</span>
      </a>
      <div class="collapse" id="subjectManagement">
          <ul class="nav flex-column ms-0">
                <li><a href="#" class="nav-link text-white"><span>Add New Subject</span></a></li>
                <li><a href="{{ url_for('admins.manage_subjects') }}" class="nav-link text-white"><span>View Subjects</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Edit Subject Details</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Assign Subjects to Classes</span></a></li>
            </ul>
      </div>
    </li>
    
     <!-- Result Management -->
    <li class="nav-item">
      <a href="#resultManagement" class="nav-link text-white" data-bs-toggle="collapse" data-bs-target="#resultManagement"  aria-expanded="false">
          <i class="fas fa-chart-line icon"></i> 
          <span>Result Management</span>
      </a>
      <div class="collapse" id="resultManagement">
          <ul class="nav flex-column ms-0">
                <li><a href="#" class="nav-link text-white"><span>Add or Upload Results</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>View Results by Student</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Edit Results</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Generate and Download Reports</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Notify Students about Results Availability</span></a></li>
            </ul>
      </div>
    </li>
    
     <!-- Teacher Management -->
    <li class="nav-item">
      <a href="#teachertManagement" class="nav-link text-white" data-bs-toggle="collapse" data-bs-target="#teacherManagement"  aria-expanded="false">
          <i class="fas fa-chalkboard-teacher icon"></i> 
          <span>Teacher Management</span>
      </a>
      <div class="collapse" id="teacherManagement">
          <ul class="nav flex-column ms-0">
                <li><a href="#" class="nav-link text-white"><span>Add New Teacher</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>View All Teachers</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Edit Teacher Details</span></a></li>
                <li><a href="#" class="nav-link text-white"><span>Assign Teachers to Classes</span></a></li>
            </ul>
      </div>
    </li>
    
    <!-- Manage Session -->
    <li class="nav-item">
      <a href="{{ url_for('admins.manage_sessions') }}" class="nav-link text-white">
        <i class="fas fa-calendar-alt icon"></i>
        <span>Manage Sessions</span>
      </a>
    </li>
    
    <li class="nav-item">
      <a href="#" class="nav-link text-white">
        <i class="bx bx-cog"></i>
        <span>Setting</span>
      </a>
    </li>
    <li class="nav-item mt-auto">
      <a href="{{ url_for('auth.logout') }}" class="nav-link text-white">
        <i class="bx bx-log-out"></i>
        <span>Log out</span>
      </a>
    </li>
  </ul>
</nav>

<section class="home-section">
  <nav>
    <div class="sidebar-button">
      <i class="bx bx-menu sidebarBtn"></i>
      <span class="dashboard">Dashboard</span>
    </div>
    <div class="d-flex align-items-center ms-auto">
        <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Search..." aria-label="Search"/>
            <button class="btn btn-primary" type="submit">
                <i class="bx bx-search"></i>
            </button>
        </form>
        <div class="dropdown ms-3 profile-details">
          <img src="/static/images/FB_IMG_1715841251928.jpg" alt="Profile" 
          class="img-fluid rounded circle" style="width: 40px; height: 40px;" />
          <button class="btn  text-dark dropdown-toggle" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                Gospel Isaac
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                <li><a class="dropdown-item" href="#">Profile</a></li>
                <li><a class="dropdown-item" href="#">Logout</a></li>
            </ul>
        </div>
    </div>
  </nav>
    <!-- Main Content -->
   <main class="flex-fill home-content container mt-0">
        {% for category, message in get_flashed_messages(with_categories=True) %}
            <div class="alert {{ category }} mt-3">{{ message }}</div>
        {% endfor %}
        {% block content %}{% endblock %}
    </main>

</section>

<!-- JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block scripts %}{% endblock %}
  <script>
    // Highlight active navigation link based on current URL
    const navLinks = document.querySelectorAll("#nav-links .nav-link");

    navLinks.forEach(link => {
        if (link.href === window.location.href) {
            link.classList.add("active");
        }

        link.addEventListener("click", () => {
            navLinks.forEach(nav => nav.classList.remove("active"));
            link.classList.add("active");
        });
    });

    // Sidebar toggle functionality
    const sidebar = document.querySelector(".sidebar");
    const sidebarBtn = document.querySelector(".sidebarBtn");
    const collapsibleNavs = document.querySelectorAll(".collapse");
    
    sidebarBtn.onclick = function () {
        sidebar.classList.toggle("active");
        
        // Collapse all expanded submenus when sidebar is toggled
        collapsibleNavs.forEach(nav => {
            if (nav.classList.contains("show")) {
                nav.classList.remove("show"); // Bootstrap's collapse class management
                nav.setAttribute("aria-expanded", "false");
            }
        });
        
        if (sidebar.classList.contains("active")) {
            sidebarBtn.classList.replace("bx-menu", "bx-menu-alt-right");
        } else {
            sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
        }
    };
</script>
</body>
</html>